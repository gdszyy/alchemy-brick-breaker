核心玩法循环 (Core Loop)

游戏采用 “无尽街机” 模式。玩家通过「选择弹珠 -> 弹珠台收集材料 -> 射击消除敌人 -> 敌人下压/生成 -> 下一轮」的循环进行游戏，直到敌人突破防线。

第一阶段：命运抉择 (Phase 0: Selection)

每一轮开始前，系统随机提供 5 颗弹珠，玩家需从中选择 3 颗进入研磨阶段。

弹珠类型與概率：

⚪ 纯净弹珠 (White, 60%)：无特殊效果。

🎨 同化弹珠 (Colored, 25%)：撞击普通钉子时，将其转化为该弹珠对应的属性钉子（弹性/穿透/散射/增幅）。

🔴 爆破弹珠 (Red Stripe, 10%)：最终生成的魔药子弹具有爆炸效果（AOE 伤害）。

🌈 七彩棱镜 (Rainbow, 5%)：在研磨阶段撞击第一颗钉子后会分裂为两颗（用于增加收集效率）。

第二阶段：研磨与提纯 (Phase 1: Gathering)

通过类似“柏青哥/弹珠台”的玩法收集材料，构建魔药配方。

1. 基础规则

投掷：在屏幕上方点击释放弹珠。

收集：弹珠撞击不同颜色的钉子，即视为收集到对应材料（计入当前配方）。

会话共享 (Drop Session)：单次投掷中，即使弹珠分裂成多个，它们收集的所有材料都会汇以此成为一颗魔药子弹的属性。

2. 钉子 (Pegs)

属性钉子：

🔵 基底 (Base)：增加基础伤害。

🟢 弹性 (Bounce)：增加子弹反弹次数。

🔴 穿透 (Pierce)：增加子弹穿透敌人次数。

🟡 散射 (Scatter)：每层散射增加 1 颗额外子弹（扇形分布）。

🟣 增幅 (Damage)：大幅增加伤害。

特殊钉子：

🌸 粉色钉子 (Pink)：拥有 1.8倍 弹力，每局随机生成，不继承。

继承机制：被同化弹珠改变颜色的钉子，有 90% 的概率保留到下一轮。

3. 特殊槽 (Special Slots)

位于两颗钉子之间，弹珠必须穿过中间才能触发：

🌌 回溯 (Recall)：弹珠保留 X 轴位置，Y 轴传送回顶部（保留已收集材料，重置下落）。

⚡ 连射 (Multicast)：最终子弹发射次数 +2（间隔 0.5s 重复发射）。

⑂ 分裂 (Split)：弹珠分裂为两个（分裂出的子弹珠无法再次触发分裂槽）。

🟢 变大 (Enlarge)：弹珠体积增大，更容易碰撞钉子（有最大尺寸限制）。

4. 连击充能 (Hit Charge)

统计单次释放中弹珠的总撞击次数。

初始阈值：5 次撞擊。

效果：达到阈值时，获得 +1 连射次数 (Multicast)。

难度递增：每次触发后，下一次触发所需的撞击次数 +1。

第三阶段：战斗与发射 (Phase 3: Combat)

使用收集到的魔药配方，以“打砖块”的方式攻击敌人。

1. 射击规则

操作：拖拽瞄准，松开射击。

角度限制：发射角度与水平线的夹角必须 > 20度，防止水平死循环。

生命周期：子弹存在时间限制（15秒），或落入屏幕最底端安全区后销毁。

2. 子弹特性

碰撞优先级：穿透 > 反弹。击中敌人时优先消耗穿透次数，耗尽后才计算反弹。

边界：屏幕左、右、上、下方均为反弹墙。

爆炸：爆破弹珠生成的子弹击中敌人产生冲击波，造成范围伤害。

3. 敌人 (Square Golems)

方形砖块：具有碰撞体积。

血量：随回合数增加而成长。

生成：

每一轮初始生成在顶部。

每行生成概率 X (60%)，保底数量 n (5个)。

若场上少于 3 行敌人，推进时会连续生成 2 行。

4. 胜负判定

推进：当玩家耗尽所有弹药后，敌人全体向下移动一行（由系统根据伤害动态调整难度 DDA）。

失败：任意敌人触碰或越过底部的 红色虚线（防御底线）。

循环：若防线未破且弹药耗尽，自动跳转回“命运抉择”阶段开始新一轮。

计分系统 (Scoring)

基础分：击杀敌人获得等同于其初始血量的分数。

连击倍率 (Combo)：

初始倍率 x1.0。

单次发射中，每击杀一个敌人，倍率 +0.2。

倍率在每次新发射时重置。